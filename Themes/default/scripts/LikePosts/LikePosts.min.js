!function(e){e.lpObj=e.lpObj||{},lpObj.timeoutTimer=null,"function"!=typeof lpObj.jQRef&&"undefined"==typeof lpObj.jQRef&&(lpObj.jQRef=lp_jquery2_0_3),lpObj.jQRef(document).ready(function(){lpObj.jQRef(".like_post_box").show(),lpObj.jQRef(".subject_heading").on("mouseenter",function(e){e.preventDefault();var t=lpObj.jQRef(this).next().html();lpObj.jQRef("<div class='subject_details'></div>").html(t).appendTo("body").fadeIn("slow")}).on("mouseleave",function(e){e.preventDefault(),lpObj.jQRef(".subject_details").fadeOut("slow"),lpObj.jQRef(".subject_details").remove()}).on("mousemove",function(e){e.preventDefault();var t=e.pageX+20,i=e.pageY+10,a=lpObj.jQRef("#wrapper").width()-t-50;lpObj.jQRef(".subject_details").css({top:i,left:t,width:a+"px"})}),lpObj.jQRef(".like_post_stats_menu a").on("click",function(e){lpObj.likePostsUtils.isNullUndefined(e)||(e.preventDefault(),e.stopPropagation()),lpObj.likePostStats.checkUrl(this.id)})})}(window),function(){function e(){}e.prototype=function(){var e=function(e){return o(e)&&null===lpObj.timeoutTimer?!1:void((null!==lpObj.timeoutTimer||"keyup"==e.type&&27==e.keyCode||"click"==e.type||"touchstart"==e.type)&&(clearTimeout(lpObj.timeoutTimer),lpObj.timeoutTimer=null,lpObj.jQRef(".like_posts_overlay").remove(),lpObj.jQRef(".like_posts_overlay").off("click"),lpObj.jQRef(document).off("click",lpObj.likePostsUtils.removeOverlay),lpObj.jQRef(document).off("keyup",lpObj.likePostsUtils.removeOverlay),lpObj.jQRef(document).off("touchstart",lpObj.likePostsUtils.removeOverlay)))},t=function(e,t){e.preventDefault();var i=lpObj.jQRef(t),a=i.parent();o(i.data("allselected"))?a.find("input").length===a.find("input:checked").length?(a.find("input:checkbox").prop("checked",!1),i.data("allselected",!1)):(a.find("input:checkbox").prop("checked",!0),i.data("allselected",!0)):i.data("allselected")===!1?(a.find("input:checkbox").prop("checked",!0),i.data("allselected",!0)):(a.find("input:checkbox").prop("checked",!1),i.data("allselected",!1))},i=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},a=function(e){return{}.toString.call(e).toLowerCase()},o=function(e,t){var i=!1,o=a(e);switch(o){case"[object array]":0===e.length&&(i=!0);break;case"[object object]":0===Object.keys(e).length&&(i=!0);break;default:"undefined"==typeof e||null===e||""===e||"null"===e||"undefined"===e?i=!0:t&&(0===e||isNaN(e))&&(i=!0)}return i};return{removeOverlay:e,selectInputByLegend:t,isMobileDevice:i,isNullUndefined:o}}(),lpObj.likePostsUtils=e.prototype}(),function(){function e(){}e.prototype=function(){var e=!1,t=function(t,a,o){if(e===!0)return!1;var s=t.target.href.split("#")[1],l=void 0!==a?parseInt(a,10):0,n=void 0!==o?parseInt(o,10):0,r=void 0!==s?parseInt(s,10):0;return isNaN(l)||isNaN(n)?!1:(e=!0,void lpObj.jQRef.ajax({type:"POST",url:smf_scripturl+"?action=likeposts;sa=like_post",dataType:"json",data:{msg:l,rating:r,author:n}}).done(function(e){if(e.response){var t={msgId:l,count:void 0!==e.count?e.count:"",newText:e.newText,likeText:e.likeText,rating:r};i(t)}}).fail(function(e){console.log(e)}).always(function(e){console.log(e)}))},i=function(t){var i=parseInt(t.count,10);if(isNaN(i))return e=!1,!1;var a=lpObj.jQRef("#like_"+t.msgId),o=t.likeText,s=1===t.rating?"#0":"#1";0===parseInt(a.attr("href").split("#")[1],10)?a.removeClass("unlike_link").addClass("like_link"):a.removeClass("like_link").addClass("unlike_link"),lpObj.jQRef(a).attr("href",s),lpObj.jQRef(a).animate({left:"-40px",opacity:"toggle"},1e3,"",function(){lpObj.jQRef(a).html(t.newText),lpObj.jQRef(a).animate({left:"0px",opacity:"toggle"},1e3)}),lpObj.jQRef("#like_count_"+t.msgId).length?""===o?lpObj.jQRef("#like_count_"+t.msgId).fadeOut(2e3).remove():lpObj.jQRef("#like_count_"+t.msgId).fadeOut(1e3,function(){lpObj.jQRef(this).html("("+o+")").fadeIn(1e3)}):lpObj.jQRef('<span class="display_inline" id="like_count_'+t.msgId+'">('+o+")</span>").hide().appendTo("#like_post_info_"+t.msgId).fadeIn(2e3),lpObj.timeoutTimer=setTimeout(function(){e=!1,lpObj.likePostsUtils.removeOverlay()},2e3)},a=function(e){return isNaN(e)?!1:void lpObj.jQRef.ajax({type:"GET",url:smf_scripturl+"?action=likepostsdata;sa=get_message_like_info",dataType:"json",data:{msg_id:e}}).done(function(e){if(!e.response)return!1;if(e.data.length<=0)return!1;var t,i=e.data,a=0,o='<div class="like_posts_overlay"><div class="like_posts_member_info_box">';for(t in i)i.hasOwnProperty(t)&&(o+='<div class="like_posts_member_info"><img class="avatar" src="'+i[t].avatar.href+'" /><div class="like_posts_member_info_details"><a href="'+i[t].href+'">'+i[t].name+"</a></div></div>");o+="</div></div>",lpObj.jQRef("body").append(o),setTimeout(function(){lpObj.jQRef(".like_posts_member_info").each(function(){a+=lpObj.jQRef(this).outerHeight()}),a>=window.innerHeight-100&&(a=window.innerHeight-200),lpObj.jQRef(".like_posts_member_info_box").css({height:a,visibility:"visible"})},50),lpObj.jQRef(document).one("click keyup touchstart",lpObj.likePostsUtils.removeOverlay),lpObj.jQRef(".like_posts_member_info_box").click(function(e){e.stopPropagation()})}).fail(function(e){console.log(e)}).always(function(e){console.log(e)})};return{likeUnlikePosts:t,showMessageLikedInfo:a}}(),lpObj.likeHandler=e.prototype}(),function(){function e(){}e.prototype=function(){var e={},t=function(t){e=lpObj.jQRef.extend({},t.txtStrings)},i=function(){lpObj.jQRef.ajax({type:"GET",url:smf_scripturl+"?action=likepostsdata;sa=like_posts_notification",dataType:"json"}).done(function(t){if(!t.response)return!1;if(t.data.length<=0)return!1;var i,o,s,l=t.data,n="",r=0,d=0,p="";n+='<div class="lp_notification_header"><div class="lp_notification_tabs" id="lp_all_notifications">'+e.lpAllNotification+'</div><div class="lp_notification_tabs" id="lp_my_notifications">'+e.lpMyPosts+'</div><div class="lp_notification_tabs close_btn" id="close_notifications">x</div></div>';for(i in l){var c=0;if(l.hasOwnProperty(i))if("all"===i){if(n+='<div class="lp_notification_body lp_all_notifications_data">',0===l[i].length)n+='<div class="single_notify">'+e.lpNoNotification+"</div>";else for(o in l[i])l[i].hasOwnProperty(o)&&(c++,n+='<div class="single_notify"><div class="avatar" style="background-image: url('+l[i][o].member.avatar.href+')"></div><div class="like_post_notify_data"><a href="'+l[i][o].member.href+'"><strong>'+l[i][o].member.name+'</strong></a> liked <a href="'+l[i][o].href+'">'+l[i][o].subject+"</a></div></div>");r=c,n+="</div>"}else if("mine"===i){if(n+='<div class="lp_notification_body lp_my_notifications_data hide_elem">',0===l[i].length)n+='<div class="single_notify">'+e.lpNoNotification+"</div>";else for(s in l[i])l[i].hasOwnProperty(s)&&(c++,n+='<div class="single_notify"><div class="avatar" style="background-image: url('+l[i][s].member.avatar.href+')"></div><div class="like_post_notify_data"><a href="'+l[i][s].member.href+'"><strong>'+l[i][s].member.name+'</strong></a> liked <a href="'+l[i][s].href+'">'+l[i][s].subject+"</a></div></div>");d=c,n+="</div>"}}p='<div class="like_posts_notification">'+n+"</div>",r=50*r,r>200?r=200:100>r&&(r=100),d=50*d,d>200?d=200:100>d&&(d=100),lpObj.jQRef("body").append(p);var f=lpObj.jQRef(".showLikeNotification").offset().left+lpObj.jQRef(".showLikeNotification").width()+20,_=f+lpObj.jQRef(".like_posts_notification").outerWidth();lpObj.likePostsUtils.isMobileDevice()?_>document.documentElement.clientWidth&&(f=lpObj.jQRef(".showLikeNotification").offset().left-lpObj.jQRef(".like_posts_notification").outerWidth()-20):_>window.innerWidth&&(f=lpObj.jQRef(".showLikeNotification").offset().left-lpObj.jQRef(".like_posts_notification").outerWidth()-20),lpObj.jQRef(".like_posts_notification").css({top:lpObj.jQRef(".showLikeNotification").offset().top,left:f}),lpObj.jQRef(".lp_all_notifications_data").css({height:r+"px"}),lpObj.jQRef(".lp_my_notifications_data").css({height:d+"px"}),lpObj.jQRef("#lp_all_notifications").css({"font-weight":"bold"}),lpObj.jQRef(".lp_notification_header").on("click",function(e){switch(e.preventDefault(),e.target.id){case"lp_all_notifications":lpObj.jQRef("#lp_all_notifications").css({"font-weight":"bold"}),lpObj.jQRef("#lp_my_notifications").css({"font-weight":"normal"}),lpObj.jQRef(".lp_my_notifications_data").hide(),lpObj.jQRef(".lp_all_notifications_data").show();break;case"lp_my_notifications":lpObj.jQRef("#lp_all_notifications").css({"font-weight":"normal"}),lpObj.jQRef("#lp_my_notifications").css({"font-weight":"bold"}),lpObj.jQRef(".lp_all_notifications_data").hide(),lpObj.jQRef(".lp_my_notifications_data").show();break;case"close_notifications":a(e)}}),lpObj.jQRef(document).on("click keyup",a)}).fail(function(e){console.log(e)}).always(function(e){console.log(e)})},a=function(e){if("keyup"==e.type&&27==e.keyCode||"click"==e.type){var t=lpObj.jQRef("#lp_all_notifications, #lp_my_notifications");t.is(e.target)||0!==t.has(e.target).length||(lpObj.jQRef(".like_posts_notification").unbind("click"),lpObj.jQRef(".like_posts_notification").unbind("keyup"),lpObj.jQRef(".lp_notification_header").unbind("click"),lpObj.jQRef(document).unbind("click",a),lpObj.jQRef(document).unbind("keyup",a),lpObj.jQRef(".like_posts_notification").remove())}};return{init:t,showLikeNotification:i}}(),lpObj.likePostsNotification=e.prototype}(),function(){function e(){}e.prototype=function(){var e=function(e){lpObj.likePostsUtils.isNullUndefined(e)||e.preventDefault(),lpObj.jQRef(".like_posts_overlay").removeClass("hide_elem"),lpObj.jQRef.ajax({type:"POST",url:smf_scripturl+"?action=admin;area=likeposts;sa=optimizelikes",dataType:"json",data:{}}).done(function(){lpObj.jQRef(".like_posts_overlay").addClass("hide_elem"),i(null,{})}).fail(function(e){console.log(e)}).always(function(){console.log("optimizeLikes always called")})},t=function(e){lpObj.likePostsUtils.isNullUndefined(e)||e.preventDefault(),lpObj.jQRef(".like_posts_overlay").removeClass("hide_elem"),lpObj.jQRef.ajax({type:"POST",url:smf_scripturl+"?action=admin;area=likeposts;sa=removeduplikes",dataType:"json",data:{}}).done(function(){lpObj.jQRef(".like_posts_overlay").addClass("hide_elem"),i(null,{})}).fail(function(e){console.log(e)}).always(function(){console.log("removeDupLikes always called")})},i=function(e,t){lpObj.likePostsUtils.isNullUndefined(e)||e.preventDefault();var i=t.totalWork||0,o=t.startLimit||0,s=t.increment||100,l=t.endLimit||100;lpObj.jQRef.ajax({type:"POST",url:smf_scripturl+"?action=admin;area=likeposts;sa=recountlikestotal",dataType:"json",data:{totalWork:i,startLimit:o,endLimit:l}}).done(function(e){e.increment=s,e.startLimit=o,a(e)}).fail(function(e){console.log(e)}).always(function(){console.log("recountStats always called")})},a=function(e){var t,i=0,a="0%";if(0===e.startLimit){var o='<div class="like_posts_overlay"><div class="recount_stats"><div></div></div></div>';lpObj.jQRef("body").append(o);var s=lpObj.jQRef(window).width(),l=lpObj.jQRef(window).height(),n=lpObj.jQRef(".recount_stats").outerHeight(),r=lpObj.jQRef(".recount_stats").outerWidth(),d=(l-n)/2,p=(s-r)/2;lpObj.jQRef(".recount_stats").css({top:d+"px",left:p+"px"}),t=e.startLimit+e.increment+1}else t=e.startLimit+e.increment;if(t<e.totalWork){var c=e.endLimit+e.increment;c>e.totalWork&&(c=Math.abs(e.endLimit-e.totalWork)+e.endLimit),i=Math.floor(e.endLimit/e.totalWork*100),a=i+"%"}else i=100,a="Done",lpObj.jQRef(document).one("click keyup touchstart",lpObj.likePostsUtils.removeOverlay);lpObj.jQRef(".recount_stats").find("div").animate({width:i+"%"},1e3,function(){100>i&&lpObj.likePostsAdmin.recountStats(null,{totalWork:e.totalWork,startLimit:t,endLimit:c})}).html(a+"&nbsp;")},o=function(e){var t=lpObj.jQRef("#lp_board_settings fieldset");lpObj.jQRef(e.target).is(":checked")?t.find("input:checkbox").prop("checked",!0):t.find("input:checkbox").prop("checked",!1)};return{optimizeLikes:e,removeDupLikes:t,recountStats:i,selectAllBoards:o}}(),lpObj.likePostsAdmin=e.prototype}(),function(){function e(){}e.prototype=function(){var e=null,t={},i={},a="messagestats",o={},s=function(e){o=lpObj.jQRef.extend({},e.txtStrings),""===e.onError&&(t={messagestats:{uiFunc:c},topicstats:{uiFunc:f},boardstats:{uiFunc:_},mostlikesreceiveduserstats:{uiFunc:u},mostlikesgivenuserstats:{uiFunc:m}},d())},l=function(){lpObj.jQRef("#like_post_stats_overlay").show(),lpObj.jQRef("#lp_preloader").show()},n=function(){lpObj.jQRef("#lp_preloader").hide(),lpObj.jQRef("#like_post_stats_overlay").hide()},r=function(){lpObj.jQRef(".like_post_stats_menu a").removeClass("active"),lpObj.jQRef(".like_post_stats_menu #"+e).addClass("active")},d=function(o){if(l(),lpObj.jQRef(".message_title").off("mouseenter mousemove mouseout"),lpObj.likePostsUtils.isNullUndefined(o)){var s=window.location.href.split("#");e=lpObj.likePostsUtils.isNullUndefined(s[1])?a:s[1]}else e=o;t.hasOwnProperty(e)===!1&&(e=a),lpObj.jQRef(".like_post_stats_data").children().hide(),r(),i.hasOwnProperty(e)===!1?p({url:e,uiFunc:t[e].uiFunc}):t[e].uiFunc()},p=function(t){lpObj.jQRef(".like_post_stats_error").hide().html(""),lpObj.jQRef.ajax({type:"POST",url:smf_scripturl+"?action=likepostsstatsajax",context:document.body,dataType:"json",data:{sa:t.url}}).done(function(a){lpObj.likePostsUtils.isNullUndefined(a.error)||""===a.error?lpObj.likePostsUtils.isNullUndefined(a.data)||lpObj.likePostsUtils.isNullUndefined(a.data.noDataMessage)||""===a.data.noDataMessage?a.response?(i[e]=a.data,t.uiFunc()):n():j({errorMsg:a.data.noDataMessage}):j({errorMsg:a.error})}).fail(function(e){console.log(e)}).always(function(){console.log("getDataFromServer always called")})},c=function(){var t=i[e],a="",s=smf_scripturl+"?topic="+t.id_topic+".msg"+t.id_msg;lpObj.jQRef(".like_post_message_data").html(""),a+='<a class="message_title" href="'+s+'">'+o.topic+": "+t.subject+'</a><span class="hide_elem">'+t.body+"</span>",a+='<div class="poster_avatar"><div class="avatar" style="background-image: url('+encodeURI(t.member_received.avatar)+')"></div></div><div class="poster_data"><a class="poster_details big_font" href="'+t.member_received.href+'">'+t.member_received.name+'</a><div class="poster_details">'+o.totalPosts+": "+t.member_received.total_posts+"</div></div>",a+='<div class="users_liked">',a+='<p class="title">'+t.member_liked_data.length+" "+o.usersWhoLiked+"</p>";for(var l=0,r=t.member_liked_data.length;r>l;l++)a+='<a class="poster_details" href="'+t.member_liked_data[l].href+'"><div class="poster_avatar" style="background-image: url('+encodeURI(t.member_liked_data[l].avatar)+')" title="'+t.member_liked_data[l].real_name+'"></div></a>';a+="</div>",lpObj.jQRef("#like_post_current_tab").text(o.mostLikedMessage),lpObj.jQRef(".like_post_message_data").append(a).show(),lpObj.jQRef(".message_title").on("mouseenter",function(e){e.preventDefault();var t=lpObj.jQRef(this).next().html();lpObj.jQRef("<div class='subject_details'></div>").html(t).appendTo("body").fadeIn("slow")}).on("mouseleave",function(e){e.preventDefault(),lpObj.jQRef(".subject_details").fadeOut("slow"),lpObj.jQRef(".subject_details").remove()}).on("mousemove",function(e){e.preventDefault();var t=e.pageX+20,i=e.pageY+10,a=lpObj.jQRef("#wrapper").width()-t-50;lpObj.jQRef(".subject_details").css({top:i,left:t,width:a+"px"})}),n()},f=function(){var t=i[e],a="",s=smf_scripturl+"?topic="+t.id_topic;lpObj.jQRef(".like_post_topic_data").html(""),a+='<a class="topic_title" href="'+s+'">'+o.mostPopularTopicHeading1+" "+t.like_count+" "+o.genricHeading1+"</a>",a+='<p class="topic_info">'+o.mostPopularTopicSubHeading1+" "+t.msg_data.length+" "+o.mostPopularTopicSubHeading2+"</p>";for(var l=0,r=t.msg_data.length;r>l;l++){var d=s+".msg"+t.msg_data[l].id_msg;a+='<div class="message_body"><div class="posted_at">'+t.msg_data[l].member.name+" : "+o.postedAt+" "+t.msg_data[l].poster_time+'</div> <a class="poster_details" href="'+t.msg_data[l].member.href+'"><div class="poster_avatar" style="background-image: url('+encodeURI(t.msg_data[l].member.avatar)+')"></div></a><div class="content_encapsulate">'+t.msg_data[l].body+'</div><a class="read_more" href="'+d+'">'+o.readMore+"</a></div>"}lpObj.jQRef("#like_post_current_tab").text(o.mostLikedTopic),lpObj.jQRef(".like_post_topic_data").html(a).show(),n()},_=function(){var t=i[e],a="",s=smf_scripturl+"?board="+t.id_board;lpObj.jQRef(".like_post_board_data").html(""),a+='<a class="board_title" href="'+s+'">'+t.name+" "+o.mostPopularBoardHeading1+" "+t.like_count+" "+o.genricHeading1+"</a>",a+='<p class="board_info">'+o.mostPopularBoardSubHeading1+" "+t.num_topics+" "+o.mostPopularBoardSubHeading2+" "+t.topics_liked+" "+o.mostPopularBoardSubHeading3+"</p>",a+='<p class="board_info extra_margin">'+o.mostPopularBoardSubHeading4+" "+t.num_posts+" "+o.mostPopularBoardSubHeading5+" "+t.msgs_liked+" "+o.mostPopularBoardSubHeading6+"</p>";for(var l=0,r=t.topic_data.length;r>l;l++){var d=smf_scripturl+"?topic="+t.topic_data[l].id_topic;a+='<div class="message_body"><div class="posted_at">'+t.topic_data[l].member.name+" : "+o.postedAt+" "+t.topic_data[l].poster_time+'</div> <a class="poster_details" href="'+t.topic_data[l].member.href+'"><div class="poster_avatar" style="background-image: url('+encodeURI(t.topic_data[l].member.avatar)+')"></div></a><div class="content_encapsulate">'+t.topic_data[l].body+'</div><a class="read_more" href="'+d+'">'+o.readMore+"</a></div>"}lpObj.jQRef("#like_post_current_tab").text(o.mostLikedBoard),lpObj.jQRef(".like_post_board_data").html(a).show(),n()},u=function(){var t=i[e],a="";lpObj.jQRef(".like_post_most_liked_user_data").html(""),a+='<div class="poster_avatar"><div class="avatar" style="background-image: url('+encodeURI(t.member_received.avatar)+')"></div></div><div class="poster_data"><a class="poster_details big_font" href="'+t.member_received.href+'">'+t.member_received.name+'</a><div class="poster_details">'+o.totalPosts+": "+t.member_received.total_posts+'</div><div class="poster_details">'+o.totalLikesReceived+": "+t.like_count+"</div></div>",a+='<p class="generic_text">'+o.mostPopularUserHeading1+"</p>";for(var s=0,l=t.topic_data.length;l>s;s++){var r=smf_scripturl+"?topic="+t.topic_data[s].id_topic+".msg"+t.topic_data[s].id_msg;a+='<div class="message_body"><div class="posted_at">'+o.postedAt+" "+t.topic_data[s].poster_time+": "+o.likesReceived+" ("+t.topic_data[s].like_count+')</div><div class="content_encapsulate">'+t.topic_data[s].body+'</div><a class="read_more" href="'+r+'">'+o.readMore+"</a></div>"}lpObj.jQRef("#like_post_current_tab").text(o.mostLikedMember),lpObj.jQRef(".like_post_most_liked_user_data").html(a).show(),n()},m=function(){var t=i[e],a="";lpObj.jQRef(".like_post_most_likes_given_user_data").html(""),a+='<div class="poster_avatar"><div class="avatar" style="background-image: url('+encodeURI(t.member_given.avatar)+')"></div></div><div class="poster_data"><a class="poster_details big_font" href="'+t.member_given.href+'">'+t.member_given.name+'</a><div class="poster_details">'+o.totalPosts+": "+t.member_given.total_posts+'</div><div class="poster_details">'+o.totalLikesGiven+": "+t.like_count+"</div></div>",a+='<p class="generic_text">'+o.mostLikeGivenUserHeading1+"</p>";for(var s=0,l=t.topic_data.length;l>s;s++){var r=smf_scripturl+"?topic="+t.topic_data[s].id_topic+".msg"+t.topic_data[s].id_msg;a+='<div class="message_body"><div class="posted_at">'+o.postedAt+" "+t.topic_data[s].poster_time+'</div><div class="content_encapsulate">'+t.topic_data[s].body+'</div><a class="read_more" href="'+r+'">'+o.readMore+"</a></div>"}lpObj.jQRef("#like_post_current_tab").text(o.mostLikeGivingMember),lpObj.jQRef(".like_post_most_likes_given_user_data").html(a).show(),n()},j=function(e){lpObj.jQRef(".like_post_stats_error").html(e.errorMsg).show(),n()};return{init:s,checkUrl:d}}(),lpObj.likePostStats=e.prototype}();